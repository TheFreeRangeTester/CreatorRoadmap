Perfecto, Pato. AcÃ¡ tenÃ©s un prompt claro, estructurado y orientado al agente de Replit, adaptado a tu stack (Node.js, TypeScript, i18next). PodÃ©s copiarlo y pegarlo directamente en Replit AI o usarlo con cualquier agente automatizado que construya funciones dentro de ese entorno.

â¸»

ğŸ§  Prompt para el Agente de Replit

Quiero que construyas una funcionalidad completa de recuperaciÃ³n de contraseÃ±a en un proyecto Node.js con TypeScript. Estamos usando:
	â€¢	Express
	â€¢	Replit DB como base de datos
	â€¢	Nodemailer (con Gmail)
	â€¢	i18next para soporte de traducciÃ³n (en inglÃ©s y espaÃ±ol)
	â€¢	HTML estÃ¡tico para el formulario de recuperaciÃ³n

â¸»

ğŸ¯ Objetivo

Permitir a los usuarios recuperar su contraseÃ±a si la olvidaron, mediante un email con un enlace Ãºnico que expira a la hora. Al ingresar al enlace, podrÃ¡n establecer una nueva contraseÃ±a.

â¸»

ğŸ“‹ Requisitos funcionales
	1.	Ruta POST /forgot-password
	â€¢	Recibe un email en el body.
	â€¢	Verifica si el usuario existe en la base de datos.
	â€¢	Genera un token Ãºnico y lo guarda como token_<TOKEN> en Replit DB junto con:
	â€¢	el email
	â€¢	la hora de expiraciÃ³n (1 hora despuÃ©s del momento actual).
	â€¢	EnvÃ­a un email con un enlace de este formato:
${BASE_URL}/reset-password/${token}
	2.	Ruta GET /reset-password/:token
	â€¢	Sirve un archivo HTML (public/reset-password.html) con un formulario para nueva contraseÃ±a.
	â€¢	Esta vista debe funcionar tanto en inglÃ©s como en espaÃ±ol, usando i18next.
	3.	Ruta POST /reset-password
	â€¢	Recibe token y newPassword.
	â€¢	Valida el token (que exista y no estÃ© expirado).
	â€¢	Actualiza la contraseÃ±a del usuario.
	â€¢	Elimina el token de la base de datos.
	â€¢	Responde con un mensaje traducido con i18next.

â¸»

ğŸ“¦ Archivos esperados
	â€¢	src/routes/auth.ts â€“ Contiene las rutas anteriores.
	â€¢	src/services/emailService.ts â€“ EnvÃ­o de correos usando Nodemailer.
	â€¢	src/services/tokenService.ts â€“ GestiÃ³n de tokens con Replit DB.
	â€¢	src/locales/en/translation.json y src/locales/es/translation.json â€“ Archivos de traducciÃ³n.
	â€¢	public/reset-password.html â€“ Formulario de nueva contraseÃ±a.

â¸»

ğŸŒ TraducciÃ³n con i18next
	â€¢	Los mensajes como â€œUsuario no encontradoâ€, â€œToken invÃ¡lido o expiradoâ€, â€œEmail enviadoâ€, â€œContraseÃ±a actualizadaâ€ deben estar localizados en en y es.
	â€¢	El formulario HTML debe cambiar idioma con una variable lang (?lang=es o ?lang=en en la URL).

â¸»

ğŸ” Seguridad
	â€¢	Los tokens deben ser generados con crypto.randomBytes(32).toString('hex').
	â€¢	Las contraseÃ±as deben ser hasheadas con bcrypt antes de guardarse.

â¸»

ğŸ“ Variables de entorno esperadas (.env)

EMAIL_USER=tu-email@gmail.com
EMAIL_PASS=tu-app-password
BASE_URL=https://tu-app.replit.app


â¸»

ğŸ§ª Base de datos (Replit DB)
	â€¢	Usuarios guardados con su email como key, y valor como JSON string con propiedades como password.
	â€¢	Tokens guardados como token_<token> con valor { email, expiry }.

â¸»

âœ”ï¸ Extras
	â€¢	Que los mensajes del servidor se envÃ­en traducidos dependiendo del idioma (se puede detectar con req.query.lang o req.headers['accept-language']).
	â€¢	El formulario HTML debe hacer POST a /reset-password con token y newPassword vÃ­a JavaScript.

â¸»

Â¿QuerÃ©s que tambiÃ©n agregue tests o proteja contra reenvÃ­os abusivos (rate limiting)?